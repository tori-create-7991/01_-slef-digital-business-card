# Ryo.Tonegawa Profile Site (Bento Style)

This repository contains the source code for a personal profile site using **Vite + Vanilla HTML/CSS**, hosted on **Firebase Hosting**, and provisioned via **Terraform** and **GitHub Actions**.

## Architecture
- **Frontend**: Standard HTML/CSS with Vite (for building). No heavy frameworks.
- **Infrastructure**: Google Cloud Platform (Firebase Hosting).
- **IaC**: Terraform manages the GCP Project configuration.
- **CI/CD**: GitHub Actions deploys changes automatically on push.
- **Security**: Workload Identity Federation (keyless authentication between GitHub and GCP).

## Prerequisites
- A Google Cloud Platform (GCP) Account.
- A GitHub Account.
- Access to **Google Cloud Shell** (browser-based terminal).

## Setup Instructions

### 1. Initialize Google Cloud Resources
You will run a setup script in Google Cloud Shell to prepare the environment.

1. Open [Google Cloud Shell](https://shell.cloud.google.com/).
2. Clone this repository (or copy the script):
   ```bash
   git clone https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   cd YOUR_REPO_NAME
   ```
3. Make the script executable and run it:
   ```bash
   chmod +x scripts/setup_gcp.sh
   ./scripts/setup_gcp.sh
   ```
4. Follow the prompts (Enter your Project ID and GitHub Repo `username/repo`).
5. **Copy the output** at the end of the script. It contains the Secret values you need.

### 2. Configure GitHub Secrets
Add the secrets generated by the script to your GitHub Repository.

If you are in **GitHub Codespaces**, you can run the `gh` commands provided by the script output.
Otherwise, go to your Repository -> **Settings** -> **Secrets and variables** -> **Actions** -> **New repository secret**.

Add the following:
- `GCP_PROJECT_ID`: Your GCP Project ID.
- `GCP_TF_STATE_BUCKET`: The bucket name (e.g., `your-project-tfstate`).
- `WIF_PROVIDER`: The full path to the Workload Identity Provider.
- `GCP_SA_EMAIL`: The service account email (e.g., `github-actions-tf@your-project.iam.gserviceaccount.com`).
- `CLOUDFLARE_API_TOKEN`: Your Cloudflare API Token (needs Zone > DNS > Edit permission).
- `CLOUDFLARE_ZONE_ID`: Your Cloudflare Zone ID for `tori-dev.com`.

### 3. Deploy
1. Push your code to the `main` branch.
   ```bash
   git add .
   git commit -m "Initial commit"
   git push origin main
   ```
2. Go to the **Actions** tab in your repository to watch the deployment.
3. Once finished, the **Deploy to Firebase Hosting** step will output your site URL (usually `https://YOUR-PROJECT.web.app`).

## Local Development
To run the site locally:
```bash
npm install
npm run dev
```
Open `http://localhost:5173` to view.
